"use strict";function Component(e){this.container=e.container,this.render=e.render,this.actions=e.actions,this.state=e.state,this._renderedHTML=null,this._initialize()}function idControl(e){if("0"===(e=String(e)).substring(0,1))return!1;for(var t,n=e.substr(0,10).split(""),o=0,a=0,r=0,l=0;l<9;++l)t=parseInt(n[l],10),1&l?r+=t:a+=t,o+=t;return(7*a-r)%10===parseInt(e.substr(-2,1),10)&&(o+=parseInt(n[9],10))%10===parseInt(e.substr(-1),10)}function compare(e,t){var n=document.createElement("div");n.classList.add("form__error"),null==document.getElementById(e).nextSibling||null==document.getElementById(e).parentNode.nextSibling?(n.innerHTML=t,document.getElementById(e).parents(".form__group")[0].appendChild(n),""!==t&&document.getElementById(e).focus()):(document.getElementById(e).nextSibling.innerHTML=t,console.log(document.querySelectorAll("#"+e)),document.getElementById(e).nextSibling&&(document.getElementById(e).parentNode.nextSibling.innerHTML=t),console.log(t),console.log(null==document.getElementById(e).parentNode.nextSibling))}function setInputFilter(e,n){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(t){e.forEach(function(e){e.addEventListener(t,function(){n(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))})})})}function moneyFormat(e){return parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1.").replace(/\.(\d+)$/,",$1")}function moneyItems(e,t){["keyup","input","change","click","focus","drop","select","focusout"].forEach(function(n){e.forEach(function(e,t){e.addEventListener(n,function(e){if(3<this.value){var t=parseFloat(this.value).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1.").replace(/\.(\d+)$/,",$1");this.value=t.toLocaleString()}})})})}Component.prototype._initialize=function(){this._render(),this._handleEvents(this._renderedHTML,this.actions)},Component.prototype._render=function(){var e=this.render.call(this,this.state),t=document.querySelector(this.container);this._renderedHTML=e,t.append(e)},Component.prototype._handleEvents=function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];for(var a in o)if(o.hasOwnProperty(a))for(var r=o[a],l=e.querySelectorAll(n),i=0;i<l.length;i++){var u=l[i];(this.data=u).addEventListener(a,r)}}},new Component({container:"#app",render:function(e,t){var n=document.createElement("div");return e.forEach(function(e){var t=document.createElement("div");t.classList.add("form__group"),t.innerHTML=e.dom,n.append(t)}),n},state:[{dom:'<input type="text" id="js-input-name" class="form__control js-mask-text" placeholder="Adınız" maxlength="10">'},{dom:'<input type="text" id="js-input-surname" class="form__control js-mask-text" placeholder="Soyadınız" maxlength="10">'},{dom:'<input type="tel" id="js-input-id" class="form__control js-mask-number" placeholder="TC Kimlik Numaranız" maxlength="11">'},{dom:'<div class="price">\n                    <input type="tel" id="js-input-home-value" class="form__control js-mask-number js-money-format" placeholder="Konut Değeri" maxlength="12">\n                </div>'},{dom:'<div class="price">\n                    <input type="tel" id="js-input-loan-amount" class="form__control js-mask-number js-money-format" placeholder="Kredi Tutarı" maxlength="10">\n                </div>'},{dom:'<select id="js-input-loan-term" class="form__select">\n                    <option value="12">12 ay</option>\n                    <option value="18">18 ay</option>\n                    <option value="24">24 ay</option>\n                    <option value="36">36 ay</option>\n                    <option value="48">48 ay</option>\n                    <option value="60">60 ay</option>\n                    <option value="72">72 ay</option>\n                    <option value="90">90 ay</option>\n                    <option value="108">108 ay</option>\n                    <option value="120">120 ay</option>\n                </select>'},{dom:'<button id="js-button-submit" class="form__btn">Devam Et</button>'}],actions:{"#js-input-name, #js-input-surname":{focusout:function(e){var t=e.target,n=e.target.id;""==t.value.trim()?compare(n,"Bu alan boş bırakılamaz!"):t.value.trim().length<2?compare(n,"Bu alan 2 karakterden küçük olamaz!"):10<t.value.trim().length?compare(n,"Bu alan 10 karakterden büyük olamaz!"):compare(n,"")}},"#js-input-id":{focusout:function(e){var t=e.target,n=e.target.id;""==t.value.trim()?compare(n,"Bu alan boş bırakılamaz!"):t.value.trim().length<11?compare(n,"Bu alan 11 karakterden küçük olamaz!"):11<t.value.trim().length?compare(n,"Bu alan 11 karakterden büyük olamaz!"):0==idControl(t.value.trim())?compare(n,"TC kimlik numarası hatalı!"):compare(n,"")}},"#js-input-home-value":{focusout:function(e){var t=e.target,n=e.target.id;""==t.oldValue?compare(n,"Bu alan boş bırakılamaz!"):parseInt(t.oldValue)<1e3?compare(n,"Konut değeri minimum 1.000,00 TL olmalıdır!"):1e6<parseInt(t.oldValue)?compare(n,"Konut değeri maksimum 1.000.000,00 TL olmalıdır!"):compare(n,"")}},"#js-input-loan-amount":{focusout:function(e){var t=e.target,n=e.target.id;""==t.oldValue?compare(n,"Bu alan boş bırakılamaz!"):parseInt(t.oldValue)<1e3?compare(n,"Kredi tutarı minimum 1.000,00 TL olmalıdır!"):1e6<parseInt(t.oldValue)?compare(n,"Kredi tutarı maksimum 1.000.000,00 TL olmalıdır!"):compare(n,"")}},"#js-button-submit":{click:function(e){var t=document.getElementById("js-input-name"),n=document.getElementById("js-input-surname"),o=document.getElementById("js-input-id"),a=document.getElementById("js-input-home-value"),r=document.getElementById("js-input-loan-amount"),l=document.getElementById("js-input-loan-term");if(""==t.value.trim()||t.value.trim().length<2||10<t.value.trim().length)t.focus();else if(""==n.value.trim()||n.value.trim().length<2||10<n.value.trim().length)n.focus();else if(""==o.value.trim()||o.value.trim().length<11||11<o.value.trim().length||0==idControl(o.value.trim()))o.focus();else if(""==a.value||parseInt(a.oldValue)<1e3||1e6<parseInt(a.oldValue))a.focus();else if(""==r.value||parseInt(r.oldValue)<1e3||1e6<parseInt(r.oldValue))r.focus();else if(parseInt(r.oldValue)>75*parseInt(a.oldValue)/100)r.parents(".form__group")[0].lastChild.innerHTML="Kredi tutarı, ev değerinin %75’inden küçük olmalıdır.(En fazla alabileceğiniz kredi tutarı: "+moneyFormat(75*a.oldValue/100-1)+"TL)",r.focus();else{var i="https://www.hesapkurdu.com/konut-kredisi/".concat(l.value,"-ay-").concat(r.oldValue,"-tl?r=").concat(a.oldValue,"&n=").concat(t.value,"&s=").concat(n.value,"&t=").concat(o.value);window.open(i,"_blank"),r.parents(".form__group")[0].lastChild.innerHTML="",location.reload()}}}}}),Element.prototype.parents=function(e){for(var t=[],n=this,o=void 0!==e;null!==(n=n.parentElement);)n.nodeType===Node.ELEMENT_NODE&&(o&&!n.matches(e)||t.push(n));return t},setInputFilter(document.querySelectorAll(".js-mask-text"),function(e){return/^[a-zA-Z ]*$/.test(e)}),setInputFilter(document.querySelectorAll(".js-mask-number"),function(e){return/^[0-9]*$/.test(e)}),moneyItems(document.querySelectorAll(".js-money-format"),function(e){return/^[0-9]*$/.test(e)});